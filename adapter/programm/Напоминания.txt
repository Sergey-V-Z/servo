добавить в проект филтр скользящее среднее пример есть в проэкто дегидратора
также пример настройки и филтр есть на сайте https://druid.su/index.php?view=rubrik&name=stm32_program&id=39

Добавить конденсаторы на питание 485.
подготовить плату к производству

шим на 50гц низ счетчика крайний угол 0xFA(250) второй крайний угол 0x4E2(1250)

для расчетв кривой торможения нужна формула 1/(1+exp((-K*x)))
где K это наклон кривой, ускорение. 
х это точка "времени" числа от -Х до Х например -150 до 150. перед расчетом нужно взять время выхода на позицию и сдвинуть ее на половину в отрицательную область
на выходе получаем масив из значений от 0 до 1, нужно смоштабировать до значений шима от минимума 0xFA до максимума 0x4E2
далее взяв время выхода на точку (оно в милисекундах) вызывая фунцию устаровки угла серво каждую милисекунду выставляем значение шим из расчитанных ранее

для указания после указания новых параметров расчета установить флаг того что нужно пересчитать масив

перед сменой положения проверять готов ли массив (проведен ли расчет)

регистры управления 
	настроки modbus
		адрес
		скорость
		
	настройки для двигателя
		наклон кривой (К)
		количество точек
		начальная позиция
		конечная позиция
		пересчитать кривую
		
	регистр позиции 
		изменить позицию при записи
		вернуть позицию при чтении
		
	сохранить настройки
	
	установить настройки по дефолту
		
	старт калибровки	
		
		
		
переменные для сохранения
	настроки modbus
		скорость
		адрес
	настройки для двигателя
		наклон кривой (К)
		количество точек
		начальная позиция
		конечная позиция
		min_U
		max_U